"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EnumModel_1 = require("../model/EnumModel");
class EnumParser {
    getEnum(strLine, lstComments, iLine) {
        const enumModel = new EnumModel_1.default();
        this.fillEnumModel(enumModel, strLine, lstComments, iLine);
        return enumModel;
    }
    fillEnumModel(enumModel, nameLine, lstComments, iLine) {
        enumModel.setNameLine(nameLine, iLine);
        let inDescription = false;
        let i = 0;
        for (let comment of lstComments) {
            i++;
            comment = comment.trim();
            const idxStart = comment.toLowerCase().indexOf('@description');
            if (idxStart !== -1 || i === 1) {
                if (idxStart !== -1 && comment.length >= idxStart + 12)
                    enumModel.setDescription(comment.substring(idxStart + 12).trim());
                else {
                    const found = comment.match('\\s');
                    if (found && found.index) {
                        enumModel.setDescription(comment.substring(found.index).trim());
                    }
                }
                inDescription = true;
                continue;
            }
            // handle multiple lines for @description.
            if (inDescription) {
                let j;
                for (j = 0; j < comment.length; j++) {
                    const ch = comment.charAt(j);
                    if (ch !== '*' && ch !== ' ')
                        break;
                }
                if (j < comment.length) {
                    enumModel.setDescription(enumModel.getDescription() + ' ' + comment.substring(j));
                }
            }
        }
    }
}
exports.default = EnumParser;
